SHELL = /bin/bash

CPPFLAGS = -I./eigen-2.0
MAKE = make -s

PREFIX = @prefix@
include_dir = $(PREFIX)/include/pragmatic

include_files = Coarsen.h Mesh.h MetricField.h Smooth.h Swapping.h \
Edge.h ElementProperty.h MetricTensor.h Refine.h vtk.h Colour.h Metis.h Surface.h VTKTools.h

default: doxygen

doxygen:
	@echo "  DOXYGEN Doxyfile"
	@doxygen Doxyfile > doxygen.log

test:
	@echo "  TEST"
	@(cd tests && $(MAKE) test)

clean:
	@echo "  CLEAN docs"
	@rm -rf docs
	@echo "  CLEAN tests"
	@(cd tests && $(MAKE) clean)

distclean:
	@echo "   DISTCLEAN"
	@rm -rf config.status config.log Makefile tests/Makefile

install:
	mkdir -p $(DESTDIR)$(include_dir)
	rm -rf INSTALLED_FILES
	for inc in $(include_files) ; do cp include/$$inc $(DESTDIR)$(include_dir)/ ; echo $(include_dir)/$$inc >> INSTALLED_FILES ; done
