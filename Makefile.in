SHELL = /bin/bash

CPPFLAGS = -I./eigen-2.0
MAKE = make -s

PREFIX = @prefix@
include_dir = $(DESTDIR)$(PREFIX)/include/pragmatic

include_files = Coarsen.h Mesh.h MetricField.h QuadraticFit.h Smooth.h Swapping.h \
Edge.h ElementProperty.h MetricTensor.h Refine.h vtk.h Colour.h Metis.h Surface.h VTKTools.h

default: doxygen

doxygen:
	@echo "  DOXYGEN Doxyfile"
	@doxygen Doxyfile > doxygen.log

test:
	@echo "  TEST"
	@(cd tests && $(MAKE) test)

clean:
	@echo "  CLEAN docs"
	@rm -rf docs
	@echo "  CLEAN tests"
	@(cd tests && $(MAKE) clean)

install:
	mkdir -p $(include_dir)
	for inc in $(include_files) ; do cp include/$$inc $(include_dir)/ ; done
